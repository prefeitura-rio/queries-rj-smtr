version: 2

models:
  - name: integracao_invalida
    description: "Tabela para validação dos dados de integração da Jaé"
    columns:
      - name: data
        description: "Data de processamento da integração (partição)"
      - name: id_integracao
        description: "Identificador único da integração"
      - name: modos
        description: "Sequência modos das transações presentes na integração (separado por ', ')"
      - name: indicador_fora_matriz
        description: "Indica se a sequência de modos não aparece na tabela br_rj_riodejaneiro_bilhetagem.matriz_integracao"
      - name: indicador_tempo_integracao_invalido
        description: "Indica se o tempo entre a primeira e a última transação da integração é maior que 3 horas"
      - name: indicador_intervalo_transacao_suspeito
        description: "Indica se existe algum intervalo entre transações menor que 5 minutos dentro da integração"
      - name: versao
        description: "Código de controle de versão do dado (SHA Github)" 
  - name: transacao_invalida
    description: "Tabela para validação dos dados de transação da Jaé"
    columns:
      - name: data
        description: "Data da transação (partição)"
      - name: hora
        description: "Hora da transação"
      - name: datetime_transacao
        description: "Data e hora da transação"
      - name: datetime_processamento
        description: "Data e hora de processamento da transação"
      - name: datetime_captura
        description: "Data e hora de captura dos dados da transação"
      - name: modo
        description: "Tipo de transporte (Ônibus, Van, BRT)"
      - name: id_consorcio
        description: "dentificador do consórcio na tabela cadastro.consorcios"
      - name: consorcio
        description: "Nome do consórcio"
      - name: id_operadora
        description: "Identificador da operadora na tabela cadastro.operadoras"
      - name: operadora
        description: "Nome da operadora de transporte (mascarado se for pessoa física)"
      - name: id_servico_jae
        description: "Identificador da linha no banco de dados da jaé (É possível cruzar os dados com a tabela rj-smtr.cadastro.servicos usando a coluna id_servico_jae)"
      - name: servico_jae
        description: "Nome curto da linha operada pelo veículo com variação de serviço (ex: 010, 011SN, ...) ou código da estação de BRT na Jaé"
      - name: descricao_servico_jae
        description: "Nome longo da linha operada pelo veículo com variação de serviço (ex: 010, 011SN, ...) ou nome da estação de BRT na Jaé"
      # - name: servico
      #   description: "Nome curto da linha operada pelo veículo com variação de serviço (ex: 010, 011SN, ...) ou código da estação no caso de BRT"
      - name: descricao_servico
        description: "Nome completo da linha ou estação"
      - name: id_transacao
        description: "Identificador único da transação"
      - name: longitude
        description: "Longitude da transação (WGS84)"
      - name: latitude
        description: "Latitude da transação (WGS84)"
      - name: longitude_servico
        description: "Longitude do stop no GTFS (WGS84)"
      - name: latitude_servico
        description: "Latitude do stop no GTFS (WGS84)"
      - name: indicador_geolocalizacao_zerada
        description: "Indica se a transação está com geolocalização zerada ou nula"
      - name: indicador_geolocalizacao_fora_rio
        description: "Indica se a transação está com geolocalização fora do município (transações com geolocalização zeradas não se enquadram)"
      - name: indicador_geolocalizacao_fora_stop
        description: "Indica se a transação do modo BRT está com geolocalização a mais de 100m da estação (transações com geolocalização zeradas não se enquadram)"
      - name: descricao_geolocalizacao_invalida
        description: "Resumo do tipo de geolocalização inválida de acordo com as colunas indicadoras"
      - name: indicador_servico_fora_gtfs
        description: "Indica se o serviço não tem correspondência com as tabela 'trips' ou 'stops' do GTFS"
      - name: versao
        description: "Código de controle de versão do dado (SHA Github)"
  - name: ordem_pagamento_validacao
    description: "Tabela para validação dos dados da ordem de pagamento da Jaé"
    columns:
      - name: data_ordem
        description: "Data da ordem de pagamento (partição)"
      - name: id_ordem_pagamento
        description: "Identificador único da ordem de pagamento"
      - name: indicador_agregacao_invalida
        description: "Indica se a soma dos valores de todos os consórcios pagos no dia é igual ao valor total do dia informado pela Jaé"
      - name: indicador_servico_operador_invalido
        description: "Indica se as informações da tabela ordem_pagamento_servico_operador_dia estão válidas"
      - name: indicador_consorcio_operador_invalido
        description: "Indica se as informações da tabela ordem_pagamento_consorcio_operador_dia estão válidas"
      - name: indicador_consorcio_invalido
        description: "Indica se as informações da tabela ordem_pagamento_consorcio_dia estão válidas"
      - name: indicador_ordem_invalida
        description: "Indica se a ordem de pagamento é válida"
      - name: versao
        description: "Código de controle de versão do dado (SHA Github)"
  - name: veiculo_validacao
    description: "Tabela para validação dos dados de veículos da Jaé"
    columns:
      - name: data
        description: "Data das informações enviadas pelo validador da Jaé (partição)"
      - name: id_validador
        description: "Número de série do validador"
      - name: id_veiculo
        description: "Código identificador do veículo (número de ordem)"
      - name: quantidade_gps_validador
        description: "Quantidade de registros de GPS do validador da Jaé no dia"
      - name: quantidade_gps_onibus
        description: "Quantidade de registros de GPS do veículo no dia"
      - name: quantidade_transacao
        description: "Quantidade de transações feitas utilizando o validador da Jaé no dia"
      - name: indicador_veiculo_licenciado
        description: "Indica se o veículo estava licenciado no dia"
      - name: versao
        description: "Código de controle de versão do dado (SHA Github)" 
        